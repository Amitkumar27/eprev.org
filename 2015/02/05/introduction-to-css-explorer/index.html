


<!DOCTYPE html>
<html lang="en"><head>
    <script>
        if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {
            document.documentElement.classList.add('support__touch_yes');
        } else {
            document.documentElement.classList.add('support__touch_no');
        }
     </script>
     
     <style>@charset "UTF-8";body{margin:0}button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}html{background-color:#e9eced;height:100%}body{color:#222;height:100%}a{color:inherit}body{font-family:Optima,Segoe,"Segoe UI",Candara,Calibri,Arial,sans-serif;font-size:18px;line-height:26px}h1,h2,h3,h4,h5,h6{margin:0 0 26px;text-rendering:optimizeLegibility;page-break-inside:avoid;font-weight:400}h1{font-size:36px;line-height:52px;text-transform:uppercase}h2{font-size:32px}h2,h3{line-height:52px}h3{font-size:27px}h4{font-size:24px;line-height:26px}h5{font-size:21px}h5,h6{line-height:26px}h6{font-size:18px}ul,ol,p,pre,blockquote{margin:26px 0}blockquote{font-style:italic;border-left:4px solid #d6d6d6;padding-left:1em}ul{list-style-position:outside}p{-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;-o-hyphens:auto;hyphens:auto}code{font-family:"Courier New",Courier,monospace;font-size:17px;line-height:1}abbr{letter-spacing:.1em}a{text-decoration:none;border-bottom:1px solid #555}.page{max-width:980px;min-width:320px;min-height:100%;margin:0 auto;overflow:hidden}.page__inner{position:relative;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transform:translate3d(0,0);transform:translate3d(0,0,0);padding:13px 13px 13px 50px;height:100%}@media all and (min-width:768px){.page__inner{padding-left:13px}}.page__inner_animated{-webkit-transition:-webkit-transform 500ms ease;transition:transform 500ms ease}@media all and (max-width:767px){.page__inner_swiped{-webkit-transform:translate3d(80%,0,0);transform:translate3d(80%,0,0)}}.page__content{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;min-height:700px}@media all and (min-width:768px){.page__content{margin-left:30%}}.page__sidebar{position:absolute;top:0;left:0;width:80%;height:100%;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);-webkit-backface-visibility:hidden}@media all and (min-width:768px){.page__sidebar{width:30%;-webkit-transform:none;transform:none}}.page__sidebar__inner{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:13px;-webkit-transition:-webkit-transform 500ms ease-in-out;transition:transform 500ms ease-in-out}.page__footer{clear:both;padding-top:26px}.page__user__name{font-size:36px;line-height:52px;text-transform:none}.page__user__name a{border-bottom-style:none}.page__user__picture{width:156px;height:156px}.page__nav{padding:0;list-style:none}.page__arrow{position:fixed;margin-top:-48px;width:24px;height:96px;top:50%;left:13px;-webkit-transition:left 500ms ease-in-out,-webkit-transform 500ms ease-in-out;transition:left 500ms ease-in-out,transform 500ms ease-in-out;cursor:pointer;z-index:1}@media all and (min-width:768px){.page__arrow{display:none}}.page__arrow_alt{left:80%;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.support__touch_yes .page__inner{padding-left:13px}.support__touch_yes .page__arrow{display:none}.post{margin-bottom:26px}@media all and (min-width:768px){.post_special_home{display:none}}.post__meta{margin-bottom:26px;color:#555;text-transform:uppercase;font-size:15px}.post__content p{margin-top:0}.post__content p>img{display:block;margin:26px auto;max-width:100%}.post__content__list{list-style-type:square;padding-left:1em}.post__content__list li{margin:26px 0}.post__image{height:312px;margin-right:auto;margin-bottom:26px;margin-left:auto;background-repeat:no-repeat;background-position:50% 50%;background-size:cover}.post__footer{margin-top:26px}.archive{display:table;list-style:none;padding:0}.archive__item{display:table-row}.archive__date{color:#555;text-transform:uppercase;padding-right:1em}.archive__date,.archive__header{display:table-cell;padding-bottom:26px}.archive__header__link{font-size:21px;line-height:26px}.tags{list-style:none;padding:0}.tags__item{text-transform:uppercase;margin-bottom:26px}.tags__item__link{font-size:21px;line-height:26px}.post__content pre code{display:block;background:#e6e6e6;padding:26px;line-height:26px;word-wrap:break-word}</style>
    
    <meta charset="utf-8"/>
    
        <title>Introduction to CSS Explorer – Anton Eprev</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
        <meta name="description" content="Hello. My name’s Anton Eprev and I’m a web developer working as front-end engineer at Booking.com in Amsterdam, Netherlands."/>
    
    <link rel="shortcut icon" href="/assets/icon.png"/>
    <link rel="alternate" type="application/atom+xml" title="Feed" href="/atom.xml"/>
    
        <meta property="og:url" content="http://eprev.org/2015/02/05/introduction-to-css-explorer/"/>
        <meta property="og:title" content="Introduction to CSS Explorer"/>
        <meta property="og:site_name" content="Anton Eprev"/>
        <meta property="og:type" content="article"/>
        <meta property="og:description" content="Explore your project’s CSS with node-specificity."/>
        
            <meta property="og:image" content="http://eprev.org/assets/posts/css-explorer-distribution.png"/>
            <meta name="twitter:card" content="summary_large_image"/>
        
        <meta name="twitter:creator" content="@eprev"/>
        <meta name="twitter:title" content="Introduction to CSS Explorer"/>
        <meta name="twitter:description" content="Explore your project’s CSS with node-specificity."/>
        
            <meta name="twitter:image:src" content="http://eprev.org/assets/posts/css-explorer-distribution.png"/>
        
    
</head><body>
    
        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-12144011-2']);
          _gaq.push(['_trackPageview']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
    
    <div class="page">
        <div class="page__arrow"></div>
        <div class="page__inner page__inner_animated page__inner_swiped">
            <div class="page__content" role="main">





<div class="post">
    <h1 class="post__header">
        
            Introduction to CSS Explorer
        
    </h1>
    <div class="post__meta">
        February 5, 2015
        
            ∙
            
                <a href="/tags/css/">css</a>,
            
                <a href="/tags/javascript/">javascript</a>
            
        
    </div>
    
        <div class="post__content">
            
            <p>I’ve been curious about the state of our CSS code and its changes over the time.
So I’ve written recently a program called <a href="https://github.com/eprev/specificity"><code>specificity</code></a>.
What does it do? It answers the following questions:</p>

<ol>
  <li>What is a total number of selectors in your CSS codebase?
How has it been changing over the time?</li>
  <li>What is a maximum/average/median selector‘s specificity of your CSS codebase?
How has it been changing over the time?</li>
  <li>How does the distribution of selector‘s specificity of your CSS codebase look like?
How has it been changing over the time?</li>
  <li>How many selectors in your CSS codebase contain at least one rule with the <code>!important</code> directive?
How has it been changing over the time?</li>
</ol>

<p>Wait, why is it so important? It’s not, until you have a codebase of dozens of
thousands lines of code that is hard to maintain and you do a lot of experiments.
And of course, if it’s not even important, it’s quite interesting at least.</p>

<p><img src="/assets/posts/css-explorer-distribution-lr.png" data-src="/assets/posts/css-explorer-distribution.png" alt="CSS specificity chart" /></p>

<p>So, <code>node-specificity</code> provides two commands. One is for parsing your CSS files and creating profiles.
Second is for reading or “exploring” these profiles. Let’s look at an example. I have a few versions of
<a href="https://github.com/eprev/specificity/tree/master/spec/fixtures/timeline">CSS</a> of the website
you’re reading right now. As I’m writing this post the website is using <code>v8.css</code>.</p>

<p>Alright, let’s create profiles for these files:</p>

<pre><code>$ node-specificity parse v1.css --label=v1 --output=v1.json
...
$ node-specificity parse v8.css --label=v8 --output=v8.json
</code></pre>

<p>We’ve created a profile for each CSS file since we want to observe changings over the time. If you use
more than one CSS file on your website, you have to create a profile for all of them, for instance:</p>

<pre><code>$ node-specificity parse main.css print.css --label=2014-12-23 --output=20141223.json
</code></pre>

<p>Label acts as a profile’s name in reports. Once we have profiles created, we are able to run a report.
Let’s start a ‘server’ report:</p>

<pre><code>$ node-specificity explore v*.json --report=server
Server is running on http://localhost:4000/
Press Ctrl + C to stop it.
</code></pre>

<p>Open a browser and go to “http://localhost:4000/”. Now you’re supposed to be seeing the page
with different controls and a weird graph. It‘s the specificity distribution chart (see in
the picture above). For each specificity (tuple) it shows the total number of selectors
of this specificity in the specific profile.</p>

<p>Other graphs are: number of selectors in your CSS files and total number of selectors in profiles,
how many of them contain rules with the <code>!important</code> directive, average and median
values of selector’s specificity for CSS files and profiles.</p>

<p><img src="/assets/posts/css-explorer-selectors-lr.png" data-src="/assets/posts/css-explorer-selectors.png" alt="Number of selectors chart" /></p>

<p>You are able to explore all these graphs for a specific profile. To do this, you have to
select the particular profile’s label in the dropdown list. For instance, it’s the specificity
distribution bar chart for ‘v8.json’ profile in the picture below.</p>

<p><img src="/assets/posts/css-explorer-profile-lr.png" data-src="/assets/posts/css-explorer-profile.png" alt="CSS specificity chart" /></p>

<p>So, <code>server</code> report is quite a powerful tool. Bear in mind, images above are for the profiles
of one humble CSS file. If you have a few files for profile, it gets better.</p>

<p>There is also <code>inspect</code> report (it’s used as the default one). If you run <code>node-specificity explore v8.json</code>,
it will print out the list of all selectors in the given profile, the summary on specificity numbers
and the specificity distribution chart, which is very similar to the one you can see above.</p>

<p><img src="/assets/posts/css-explorer-cli-lr.png" data-src="/assets/posts/css-explorer-cli.png" alt="Screenshot of the ‘inspect’ report" /></p>

<p>Reports can accept additional command line options. There are few of them. In the example above,
<code>--no-inspect-selectors</code> option has been used. It disables printing out the list of all selectors.</p>

<p>That’s it. Happy exploring!</p>

        </div>
    
</div>

<div class="post post_special_home">
    <h3 class="post__header">
        &lsaquo; <a class="page__header__link" href="/">Home</a>
    </h3>
</div>
            </div>
            <div class="page__sidebar">
                <div class="page__sidebar__inner">
                    
                        <h2 class="page__user__name"><a href="/">@eprev</a></h2>
                    
                    <div class="page__user__picture"></div>
                    <p>My name’s Anton Eprev and I’m a web developer working as front-end engineer at Booking.com in Amsterdam, Netherlands.</p>
                    <ul class="page__nav">
                        <li>
                            
                                <a href="/">Recent</a>
                            
                        </li>
                        <li>
                            
                                <a href="/archive/">Archive</a>
                            
                        </li>
                        <li>
                            
                                <a href="/labs/">Laboratory</a>
                            
                        </li>
                        <li>
                            
                                <a href="/tags/">Tags</a>
                            
                        </li>
                    </ul>
                    <p>Geeky Links:</p>
                    <ul class="page__nav">
                        <li><a href="http://twitter.com/eprev">Twitter</a></li>
                        <li><a href="http://github.com/eprev">GitHub</a></li>
                        <li><a href="http://www.flickr.com/photos/eprev/">Flickr</a></li>
                        <li><a href="http://careers.stackoverflow.com/eprev">Résumé</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>function loadCSS(a){requestAnimationFrame(function(){var b=document.createElement("link"),c=document.getElementsByTagName("head")[0];b.rel="stylesheet",b.href=a,c.parentNode.insertBefore(b,c)})}var requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)};requestAnimationFrame(function(){document.querySelector(".page__inner").classList.toggle("page__inner_swiped")});</script>
    
    <script>loadCSS("/assets/css/v/14/main.min.css");</script>
    <noscript>
        <link href="/assets/css/v/14/main.min.css" rel="stylesheet" media="all"/>
    </noscript>
    <script src="/assets/js/v/8/magic.min.js" async></script>
</body></html>

