<!DOCTYPE html>
{% if jekyll.environment == "production" %}
  {% assign site_url = site.url %}
{% else %}
  {% assign site_url = "" %}
{% endif %}
{% if site.data.manifest %}
  {% capture js_main  %}{{ site_url }}/assets/{{ site.data.manifest['main.js'] }}{% endcapture %}
  {% capture js_fontfaceobserver  %}{{ site_url }}/assets/{{ site.data.manifest['fontfaceobserver.js'] }}{% endcapture %}
{% else %}
  {% capture js_main %}{{ site_url }}/assets/main.js{% endcapture %}
  {% capture js_fontfaceobserver %}{{ site_url }}/assets/fontfaceobserver.js{% endcapture %}
{% endif %}
<html lang="en">
  <meta charset="utf-8">
  {% if page_title %}
    <title>{{ page_title }} – {{ site.title }}</title>
  {% elsif page.title %}
    <title>{{ page.title }} – {{ site.title }}</title>
  {% else %}
    <title>{{ site.title }}</title>
  {% endif %}
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% if page.excerpt %}
    <meta name="description" content="{{ page.excerpt }}">
  {% elsif page.description %}
    <meta name="description" content="{{ page.description }}">
  {% else %}
    <meta name="description" content="{{ site.description }}">
  {% endif %}
  {% if jekyll.environment == "production" %}
    <style>{% include main.min.css %}</style>
  {% else %}
    <link href="{{ site_url }}/main.css" rel="stylesheet" media="all">
  {% endif %}
  <script src="{{ js_main }}" defer></script>
  <link rel="shortcut icon" href="{{ site_url }}/images/icon.png">
  <link rel="alternate" type="application/atom+xml" title="Feed" href="{{ site_url }}/atom.xml">
  <link rel="canonical" href="{{ site_url }}{{ page.url }}">
  {% if page.excerpt %}
    <meta property="og:url" content="{{ site_url }}{{ page.url }}">
    <meta property="og:title" content="{{ page.title }}">
    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:type" content="article">
    <meta property="og:description" content="{{ page.excerpt }}">
    {% if page.image %}
      <meta property="og:image" content="{{ site_url }}/images/posts/{{ page.image }}">
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:image" content="{{ site.utl }}/images/posts/{{ page.image }}">
    {% elsif page.share-image %}
      <meta property="og:image" content="{{ site_url }}/images/posts/{{ page.share-image }}">
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:image" content="{{ site_url }}/images/posts/{{ page.share-image }}">
    {% else %}
      <meta property="og:image" content="{{ site_url }}/images/default-share-image.png">
      <meta name="twitter:card" content="summary">
    {% endif %}
    <meta name="twitter:creator" content="@{{ site.twitter }}">
    <meta name="twitter:title" content="{{ page.title }}">
    <meta name="twitter:description" content="{{ page.excerpt }}">
  {% endif %}
    <script>
      {% if jekyll.environment == "production" %}
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-12144011-2', {'siteSpeedSampleRate': 100});
      ga('send', 'pageview');
      window.addEventListener('error', function(e) {
        ga('send', 'event', 'JavaScript Error', e.message, e.filename ? (e.filename + ':' + e.lineno) : 'N/A', {nonInteraction: 1});
      });
      if (window.performance && document.hidden !== undefined) {
        var prevTimeStamp = performance.now();
        var timeOnPage = 0;
        var accTimeOnPage = function () {
          if (document.hidden) {
              timeOnPage += Math.round(performance.now() - prevTimeStamp);
          } else {
              prevTimeStamp = performance.now();
          }
        };
        document.addEventListener('visibilitychange', accTimeOnPage);
        window.addEventListener('unload', function () {
          accTimeOnPage();
          ga('send', 'timing', 'Engagement', 'Time On Page', timeOnPage, {transport: 'beacon'});
        });
      }
      {% endif %}
      var html = document.documentElement;
      if (sessionStorage.fontsLoaded) {
        html.classList.add('fonts-loaded');
      } else {
        var script = document.createElement('script');
        script.src = '{{ js_fontfaceobserver }}';
        script.async = true;
        script.onload = function () {
          Promise.all([
            (new FontFaceObserver('Merriweather Sans', {weight: 300})).load(),
            (new FontFaceObserver('Merriweather Sans', {weight: 700})).load(),
            (new FontFaceObserver('Merriweather Sans', {weight: 300, style: 'italic'})).load(),
            (new FontFaceObserver('Merriweather', {weight: 400})).load(),
          ]).then(function () {
            html.classList.add('fonts-loaded');
            sessionStorage.fontsLoaded = 'yes';
          });
        }
        document.head.appendChild(script);
      }
    </script>
  <div class="page">
    <div class="page__sidebar">
      <div class="page__user-picture-story">
        {% if page.url == "/" %}
          <h1 class="page__user-name">@{{ site.twitter }}</h1>
        {% else %}
          <a class="page__user-name g--ff-serif" href="/">@{{ site.twitter }}</a>
        {% endif %}
        <svg class="page__user-picture" viewBox="0 0 484 570">
          <path d="M39 503v67h343v-67H39z" fill="#feffff"/>
          <path d="M10.502 569.5v-41c0-28 37.29-41.04 37.29-41.04L127.5 556.5H150v13H10.502zM367 437h27c19 0 65.5 0 85 83v50H367V437zM255 553.5h33v16h-33v-16z" fill="#ff2600"/>
          <path d="M39 191v282c0 19.5 51.5 84 87 84h171c49 0 85-66.5 85-84V191c0-4-48-80-52-80H90.5c-4 0-51.5 80-51.5 80" fill="#ffd400"/>
          <path d="M38 268.92v-122.5c0-34.5 22.736-33.687 53-34-21.5.5-27.5-28.5-27.5-43.5 0-14.5 0-41.5 29-55.5 28.5-14 69.5 4 69.5 4s-20.5 18-34 51.5c1.5 9.5 9 4 9 4s13-41.5 100-63c95.5-9.5 197-16.5 246.5 0-19.5 66.5-101 103-147 102 46 1 46 34.5 46 34.5v122.5h-64v-157c0 9-216.5 7.5-216.5 7.5v150c-30-.5-64-.5-64-.5z" fill="#ff2600"/>
          <path d="M417 342v-55c0-37-36-37-40-37h-15c-4 0-8 4-8 8v113c0 4 4 8 8 8h15c4 0 40 0 40-37M0 287v55c0 37 36 37 40 37h15c4 0 8-4 8-8V258c0-4-4-8-8-8H40c-4 0-40 0-40 37" fill="#ffd400"/>
          <path d="M150 436v17h116v-17H150" fill="#770b00" data-id="mouth"/>
          <path d="M279 342c-25.5 0-46-20.5-46-46s20.5-46 46-46 46 20.5 46 46-20.5 46-46 46m-142 0c-25.5 0-46-20.5-46-46s20.5-46 46-46 46 20.5 46 46-20.5 46-46 46" fill="#feffff"/>
          <circle cx="137" cy="296" r="24" fill="#aad6d7" data-id="right-eye"/>
          <circle cx="279" cy="296" r="24" fill="#aad6d7" data-id="left-eye"/>
          <path d="M137.5 373c-42 0-76.5-34.5-76.5-76.5S95.5 220 137.5 220c32.003 0 59.65 20.03 71 48.147C219.85 240.03 247.497 220 279.5 220c42 0 76.5 34.5 76.5 76.5S321.5 373 279.5 373c-32.003 0-59.65-20.03-71-48.147C197.15 352.97 169.503 373 137.5 373m-.5-31c25.5 0 46-20.5 46-46s-20.5-46-46-46-46 20.5-46 46 20.5 46 46 46m142 0c25.5 0 46-20.5 46-46s-20.5-46-46-46-46 20.5-46 46 20.5 46 46 46" fill="#770b00"/>
        </svg>
        <div class="page__user-story">
          {{ site.description }}
          I’m on <a href="https://twitter.com/eprev">Twitter</a>,
          <a href="https://github.com/eprev">GitHub</a> and <a href="https://unsplash.com/@eprev">Unsplash</a>.
        </div>
      </div>
      <ul class="page__nav">
        <li>
          {% if page.url == "/" %}
            Home
          {% else %}
            <a href="/">Home</a>
          {% endif %}
        </li>
        <li>
          {% if page.url == "/archive/" %}
            Archive
          {% else %}
            <a href="/archive/">Archive</a>
          {% endif %}
        </li>
        <li>
          {% if page.url == "/tags/" %}
            Tags
          {% else %}
            <a href="/tags/">Tags</a>
          {% endif %}
        </li>
      </ul>
    </div>
    <div class="page__content">
