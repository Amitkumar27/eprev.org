<!doctype html><html lang="en"><meta charset="utf-8"><title>Mongo shell as an interactive JavaScript interpreter – Anton Eprev</title><link rel="shortcut icon" href="/assets/4-eyed-32x32.png"><link rel="preload" as="font" type="font/woff2" href="/assets/fonts/merriweathersans-light.woff2" crossorigin><link rel="preload" as="font" type="font/woff2" href="/assets/fonts/merriweathersans-bold.woff2" crossorigin><link rel="preload" as="font" type="font/woff2" href="/assets/fonts/merriweathersans-lightitalic.woff2" crossorigin><style>undefined</style><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Do you know that MongoDB has JavaScript interpreter? And yes, you can use it."><link rel="alternate" type="application/atom+xml" title="Feed" href="https://eprev.org/atom.xml"><link rel="canonical" href="https://eprev.org/2013/09/22/mongo-shell-as-an-interactive-javascript-interpreter/"><meta property="og:url" content="https://eprev.org/2013/09/22/mongo-shell-as-an-interactive-javascript-interpreter/"><meta property="og:title" content="Mongo shell as an interactive JavaScript interpreter"><meta property="og:site_name" content="Anton Eprev"><meta property="og:type" content="article"><meta property="og:description" content="Do you know that MongoDB has JavaScript interpreter? And yes, you can use it."><meta name="twitter:creator" content="@eprev"><meta name="twitter:title" content="Mongo shell as an interactive JavaScript interpreter"><meta name="twitter:description" content="Do you know that MongoDB has JavaScript interpreter? And yes, you can use it."><script src="/assets-bundles/main-(stdin)= f98acbd4dd99f0510b72538b8ed94847.js" type="module"></script><body><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-12144011-2', {'siteSpeedSampleRate': 100});
ga('set', 'transport', 'beacon');
ga('send', 'pageview');
window.addEventListener('error', function(e) {
ga('send', 'event', 'JavaScript Error', e.message, e.filename ? (e.filename + ':' + e.lineno) : 'N/A', {nonInteraction: 1});
});
if (window.performance && document.hidden !== undefined) {
var prevTimeStamp = performance.now();
var timeOnPage = 0;
var accTimeOnPage = function () {
if (document.hidden) {
timeOnPage += Math.round(performance.now() - prevTimeStamp);
} else {
prevTimeStamp = performance.now();
}
};
document.addEventListener('visibilitychange', accTimeOnPage);
window.addEventListener('unload', function () {
accTimeOnPage();
ga('send', 'timing', 'Engagement', 'Time On Page', timeOnPage, {transport: 'beacon'});
});
}
document.body.addEventListener('click', (e) => {
if (e.target.matches('[data-ga-on=click]')) {
const data = e.target.dataset;
ga('send', 'event', data.gaCategory, data.gaAction, data.gaLabel, data.gaValue);
}
});</script><div class="page"><div class="page__sidebar"><div class="page__user-picture-story"><a class="page__user-name" href="/">@eprev</a><div class="page__user-picture"><svg viewBox="0 0 484 570" xmlns="http://www.w3.org/2000/svg"><path d="M39 503v67h343v-67H39z" fill="#feffff"/><path d="M10.502 569.5v-41c0-28 37.29-41.04 37.29-41.04L127.5 556.5H150v13H10.502zM367 437h27c19 0 65.5 0 85 83v50H367V437zM255 553.5h33v16h-33v-16z" fill="#ff2600"/><path d="M39 191v282c0 19.5 51.5 84 87 84h171c49 0 85-66.5 85-84V191c0-4-48-80-52-80H90.5c-4 0-51.5 80-51.5 80" fill="#ffd400"/><path d="M38 268.92v-122.5c0-34.5 22.736-33.687 53-34-21.5.5-27.5-28.5-27.5-43.5 0-14.5 0-41.5 29-55.5 28.5-14 69.5 4 69.5 4s-20.5 18-34 51.5c1.5 9.5 9 4 9 4s13-41.5 100-63c95.5-9.5 197-16.5 246.5 0-19.5 66.5-101 103-147 102 46 1 46 34.5 46 34.5v122.5h-64v-157c0 9-216.5 7.5-216.5 7.5v150c-30-.5-64-.5-64-.5z" fill="#ff2600"/><path d="M417 342v-55c0-37-36-37-40-37h-15c-4 0-8 4-8 8v113c0 4 4 8 8 8h15c4 0 40 0 40-37M0 287v55c0 37 36 37 40 37h15c4 0 8-4 8-8V258c0-4-4-8-8-8H40c-4 0-40 0-40 37" fill="#ffd400"/><path d="M150 436v17h116v-17H150" fill="#770b00" data-id="mouth"/><path d="M279 342c-25.5 0-46-20.5-46-46s20.5-46 46-46 46 20.5 46 46-20.5 46-46 46m-142 0c-25.5 0-46-20.5-46-46s20.5-46 46-46 46 20.5 46 46-20.5 46-46 46" fill="#feffff"/><circle cx="137" cy="296" r="24" fill="#aad6d7" data-id="right-eye" transform="translate(20, 0)"/><circle cx="279" cy="296" r="24" fill="#aad6d7" data-id="left-eye" transform="translate(20, 0)"/><path d="M137.5 373c-42 0-76.5-34.5-76.5-76.5S95.5 220 137.5 220c32.003 0 59.65 20.03 71 48.147C219.85 240.03 247.497 220 279.5 220c42 0 76.5 34.5 76.5 76.5S321.5 373 279.5 373c-32.003 0-59.65-20.03-71-48.147C197.15 352.97 169.503 373 137.5 373m-.5-31c25.5 0 46-20.5 46-46s-20.5-46-46-46-46 20.5-46 46 20.5 46 46 46m142 0c25.5 0 46-20.5 46-46s-20.5-46-46-46-46 20.5-46 46 20.5 46 46 46" fill="#770b00"/></svg></div><div class="page__user-story">My name’s Anton Eprev and I’m a web developer working as front-end engineer at Booking.com in Amsterdam, Netherlands. I’m on <a href="https://twitter.com/eprev">Twitter</a>, <a href="https://github.com/eprev">GitHub</a> and <a href="https://unsplash.com/@eprev">Unsplash</a>.</div></div><ul class="page__nav"><li><a href="/">Home</a></li><li><a href="/archive/">Archive</a></li><li><a href="/tags/">Tags</a></li><li><a href="/atom.xml" class="rss">Feed <svg viewBox="0 0 2048 2048" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill="#333333" d="M272.471 570.08V272.001h16c410.031 0 781.933 166.909 1051.34 436.402 269.336 269.426 436.174 641.389 436.174 1051.6v16h-314.992v-16c0-323.56-131.538-617.092-343.903-829.707-212.277-212.528-505.373-344.214-828.617-344.214h-16v-16z"/><path fill="#333333" d="M272.015 1070.06V771.981h16c272.262 0 519.128 110.832 697.96 289.753 178.832 178.923 289.575 425.934 289.575 698.269v16H960.102v-16c0-90.402-17.458-177.951-50.831-258.675-33.32-80.595-82.528-154.512-146.086-217.8l-.063-.063c-63.341-63.61-137.25-112.971-217.764-146.432-80.446-33.433-167.55-50.973-257.342-50.973h-16v-16z"/><path fill="#333333" d="M334.294 1413.49c38.385-38.288 91.32-62.061 149.555-62.061 58.608 0 111.582 23.705 149.961 61.9 38.531 38.346 62.327 91.268 62.327 149.443 0 58.492-23.713 111.332-62.13 149.57-38.401 38.22-91.457 61.806-150.158 61.806-58.326 0-111.345-23.651-149.75-61.969-38.318-38.227-62.083-90.999-62.083-149.407 0-58.092 23.848-110.946 62.278-149.282z"/></svg></a></li></ul></div><div class="page__content"><div class="post"><h1 class="post__header">Mongo shell as an interactive JavaScript interpreter</h1><div class="post__meta">September 22, 2013 ∙ <a href="/tags/javascript/">javascript</a>, <a href="/tags/mongodb/">mongodb</a></div><div class="post__content"><p>Do you have MongoDB installed? If you do then you have JavaScript interpreter. MongoDB has SpiderMonkey JavaScript engine. To start an interactive shell you have to type <code>mongo --nodb</code> in the shell.</p><figure class="highlight"><code><div class="scrollable"><pre><span class="hljs-meta">$</span><span class="bash"> mongo --nodb</span>
MongoDB shell version: 2.2.0
<span class="hljs-meta">&gt;</span><span class="bash"> var user = {name: <span class="hljs-string">"Anton Eprev"</span>, age: 27}</span>
<span class="hljs-meta">&gt;</span><span class="bash"> user</span>
{ "name" : "Anton Eprev", "age" : 27 }
<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-built_in">print</span>(user)</span>
[object Object]
<span class="hljs-meta">&gt;</span><span class="bash"> printjson(user)</span>
{ "name" : "Anton Eprev", "age" : 27 }
<span class="hljs-meta">&gt;</span><span class="bash"> var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-built_in">print</span>(numbers)</span>
1,2,3,4,5,6,7,8,9
<span class="hljs-meta">&gt;</span><span class="bash"> printjson(numbers)</span>
[ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]</pre></div></code></figure><p>And of course the shell allows you to use loops, user functions and etc.:</p><figure class="highlight"><code><div class="scrollable"><pre><span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-keyword">for</span> (var i <span class="hljs-keyword">in</span> user) { <span class="hljs-built_in">print</span>(i, user[i]) }</span>
name Anton Eprev
age 27
<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-keyword">function</span> add(x){ <span class="hljs-built_in">return</span> <span class="hljs-keyword">function</span>(y){ <span class="hljs-built_in">return</span> x + y } }</span>
<span class="hljs-meta">&gt;</span><span class="bash"> add(3)(4)</span>
7
<span class="hljs-meta">&gt;</span><span class="bash"> {</span>
... for (var i = 0; i &lt; 10; i++)
...     print(i)
... }
0
1
…
9</pre></div></code></figure><p>You can also use the <code>cat</code> function to read the file’s contents.</p><figure class="highlight"><code><div class="scrollable"><pre><span class="hljs-meta">&gt;</span><span class="bash"> var profile = cat(<span class="hljs-string">'.profile'</span>)</span>
<span class="hljs-meta">&gt;</span><span class="bash"> profile</span>
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
…</pre></div></code></figure><p>You may even explore global scope by executing <code>printjson(this)</code> and find out the following functions:</p><figure class="highlight"><code><div class="scrollable"><pre>pwd()
ls()
cd()
mkdir()
hostname()
sleep()
hex_md5()</pre></div></code></figure><p>And finally, you can run a JavaScript file using MongoDB shell.</p><figure class="highlight"><code><div class="scrollable"><pre><span class="hljs-meta">$</span><span class="bash"> cat hello.js</span>
print("Hello World!");
<span class="hljs-meta">$</span><span class="bash"> mongo --nodb hello.js</span>
MongoDB shell version: 2.2.0
Hello World!</pre></div></code></figure><p>Happy coding =]</p></div></div></div></div></body></html>