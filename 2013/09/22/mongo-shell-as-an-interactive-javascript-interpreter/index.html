<!DOCTYPE html><html lang="en" class="theme--light"><meta charset="utf-8"><title>Mongo shell as an interactive JavaScript interpreter – Anton Eprev</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="My name’s Anton Eprev and I’m a web developer working as front-end engineer at Booking.com in Amsterdam, Netherlands.
"><style>body{font-family:Optima,Segoe,"Segoe UI",Candara,Calibri,Arial,sans-serif;color:#222}button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}html{font-size:18px;line-height:1.5;-webkit-text-size-adjust:none;-moz-text-size-adjust:none;-ms-text-size-adjust:none;text-size-adjust:none}h1,h2,h3,h4,h5,h6{margin:0 0 1.5rem;font-weight:400;text-rendering:optimizeLegibility;page-break-inside:avoid}h1,h2{line-height:3rem}h1{text-transform:uppercase;font-size:2rem}h2{font-size:1.75rem}h3,h4,h5,h6{font-size:1.5rem;line-height:1.5rem}h4,h5,h6{font-size:1.3rem}h5,h6{font-size:1.16rem}h6{font-size:1rem}blockquote,ol,p,pre,ul{margin:1.5rem 0}blockquote{font-style:italic;border-left:4px solid #eee;padding-left:1rem}ul{list-style-position:outside;list-style-type:square;padding-left:0}p{-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}code{font-family:"Courier New",Courier,monospace;font-size:.92rem;line-height:1}abbr{letter-spacing:.1em}a{color:inherit;text-decoration:none;border-bottom:1px solid currentColor}.g--shady{color:#555}.page{max-width:980px;min-width:320px;margin:0 auto;padding:1.5rem 0}.page__sidebar{width:30%;float:left;padding:0 1rem 0 1.5rem;box-sizing:border-box;display:flex;flex-direction:column}.page__content{margin-left:30%;box-sizing:border-box;padding:0 3rem 0 1rem}.page__user-name{font-size:2rem;line-height:3rem;text-transform:none}.page__user-name-link{border-bottom:0}.page__user-picture{height:calc(6*1.5rem);background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDg0IiBoZWlnaHQ9IjU3MCIgdmlld0JveD0iMCAwIDQ4NCA1NzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZD0iTTM5IDUwM3Y2N2gzNDN2LTY3SDM5eiIgZmlsbD0iI0ZFRkZGRiIvPjxwYXRoIGQ9Ik0xMC41MDIgNTY5LjV2LTQxYzAtMjggMzcuMjktNDEuMDQgMzcuMjktNDEuMDRMMTI3LjUgNTU2LjVIMTUwdjEzSDEwLjUwMnpNMzY3IDQzN2gyN2MxOSAwIDY1LjUgMCA4NSA4M3Y1MEgzNjdWNDM3ek0yNTUgNTUzLjVoMzN2MTZoLTMzdi0xNnoiIGZpbGw9IiNGRjI2MDAiLz48cGF0aCBkPSJNMzkgMTkxdjI4MmMwIDE5LjUgNTEuNSA4NCA4NyA4NGgxNzFjNDkgMCA4NS02Ni41IDg1LTg0VjE5MWMwLTQtNDgtODAtNTItODBIOTAuNWMtNCAwLTUxLjUgODAtNTEuNSA4MCIgZmlsbD0iI0ZGRDQwMCIvPjxwYXRoIGQ9Ik0zOCAyNjguOTJ2LTEyMi41YzAtMzQuNSAyMi43MzYtMzMuNjg3IDUzLTM0LTIxLjUuNS0yNy41LTI4LjUtMjcuNS00My41IDAtMTQuNSAwLTQxLjUgMjktNTUuNSAyOC41LTE0IDY5LjUgNCA2OS41IDRzLTIwLjUgMTgtMzQgNTEuNWMxLjUgOS41IDkgNCA5IDRzMTMtNDEuNSAxMDAtNjNjOTUuNS05LjUgMTk3LTE2LjUgMjQ2LjUgMC0xOS41IDY2LjUtMTAxIDEwMy0xNDcgMTAyIDQ2IDEgNDYgMzQuNSA0NiAzNC41djEyMi41aC02NHYtMTU3YzAgOS0yMTYuNSA3LjUtMjE2LjUgNy41djE1MGMtMzAtLjUtNjQtLjUtNjQtLjV6IiBmaWxsPSIjRkYyNjAwIi8+PHBhdGggZD0iTTQxNyAzNDJ2LTU1YzAtMzctMzYtMzctNDAtMzdoLTE1Yy00IDAtOCA0LTggOHYxMTNjMCA0IDQgOCA4IDhoMTVjNCAwIDQwIDAgNDAtMzdNMCAyODd2NTVjMCAzNyAzNiAzNyA0MCAzN2gxNWM0IDAgOC00IDgtOFYyNThjMC00LTQtOC04LThINDBjLTQgMC00MCAwLTQwIDM3IiBmaWxsPSIjRkZENDAwIi8+PHBhdGggZD0iTTE1MCA0MzZ2MTdoMTE2di0xN0gxNTAiIGZpbGw9IiM3NzBCMDAiLz48cGF0aCBkPSJNMjc5IDM0MmMtMjUuNSAwLTQ2LTIwLjUtNDYtNDZzMjAuNS00NiA0Ni00NiA0NiAyMC41IDQ2IDQ2LTIwLjUgNDYtNDYgNDZtLTE0MiAwYy0yNS41IDAtNDYtMjAuNS00Ni00NnMyMC41LTQ2IDQ2LTQ2IDQ2IDIwLjUgNDYgNDYtMjAuNSA0Ni00NiA0NiIgZmlsbD0iI0ZFRkZGRiIvPjxwYXRoIGQ9Ik0xMzYuNSAyOTZjLTEzIDAtMjMuNS0xMC41LTIzLjUtMjMuNXMxMC41LTIzLjUgMjMuNS0yMy41IDIzLjUgMTAuNSAyMy41IDIzLjUtMTAuNSAyMy41LTIzLjUgMjMuNW0xNDMgMGMtMTMgMC0yMy41LTEwLjUtMjMuNS0yMy41czEwLjUtMjMuNSAyMy41LTIzLjUgMjMuNSAxMC41IDIzLjUgMjMuNS0xMC41IDIzLjUtMjMuNSAyMy41IiBmaWxsPSIjQUFENkQ3Ii8+PHBhdGggZD0iTTEzNy41IDM3M2MtNDIgMC03Ni41LTM0LjUtNzYuNS03Ni41Uzk1LjUgMjIwIDEzNy41IDIyMGMzMi4wMDMgMCA1OS42NSAyMC4wMyA3MSA0OC4xNDdDMjE5Ljg1IDI0MC4wMyAyNDcuNDk3IDIyMCAyNzkuNSAyMjBjNDIgMCA3Ni41IDM0LjUgNzYuNSA3Ni41UzMyMS41IDM3MyAyNzkuNSAzNzNjLTMyLjAwMyAwLTU5LjY1LTIwLjAzLTcxLTQ4LjE0N0MxOTcuMTUgMzUyLjk3IDE2OS41MDMgMzczIDEzNy41IDM3M20tLjUtMzFjMjUuNSAwIDQ2LTIwLjUgNDYtNDZzLTIwLjUtNDYtNDYtNDYtNDYgMjAuNS00NiA0NiAyMC41IDQ2IDQ2IDQ2bTE0MiAwYzI1LjUgMCA0Ni0yMC41IDQ2LTQ2cy0yMC41LTQ2LTQ2LTQ2LTQ2IDIwLjUtNDYgNDYgMjAuNSA0NiA0NiA0NiIgZmlsbD0iIzc3MEIwMCIvPjwvZz48L3N2Zz4=);background-size:contain;background-position:center;margin-bottom:1.5rem}.post__header{margin-bottom:0}.post__content p,.post__content ul{margin-top:0}.post__content figure.highlight,body{margin:0}.post__content pre code{position:relative;display:block;padding:1.5rem 0;line-height:1.5;overflow:auto;background:#f9f9f9;box-shadow:1.5rem 0 #f9f9f9,-1.5rem 0 #f9f9f9}.post__meta{text-transform:uppercase;font-size:.83rem;line-height:1.5rem;margin:.75rem 0}.post__content-list li{margin-bottom:1.5rem}.post__content img{display:block;margin:1.5rem auto;max-width:100%}.post-special-home{position:relative;font-size:1.5rem;line-height:1.5rem}.post-special-home::before{content:'\2039';position:absolute;left:-1rem}.archive{list-style:none;padding:0}.archive__item{display:block;margin-bottom:1.5rem}.archive__date{font-size:.92rem;line-height:1.5rem;text-transform:uppercase}.archive__header{font-size:1.16rem;line-height:1.5rem}.tags{list-style:none;padding:0}.tags__item{text-transform:uppercase;margin-bottom:1.5rem;line-height:1.5rem;font-size:1.16rem;display:inline-block}.tags__item::after{content:'\a0\25aa\a0'}.tags__item:last-child::after{content:''}@media (max-width:979px){ul{padding-left:1rem}.page{padding-top:0}.page__sidebar{float:none;width:auto;padding-left:1rem;padding-top:1.5rem;box-shadow:0 1px #eee;margin-bottom:1rem}.page__content{margin-left:auto;padding-right:1rem}.page__user-picture-story{display:flex;align-items:center;margin-bottom:1.5rem}.page__user-picture{height:calc(3*1.5rem);width:calc(3*1.5rem);flex-shrink:0;margin-bottom:0;padding-right:1rem}.page__user-name{display:none}.page__nav{margin-top:0;padding-left:0;order:-1}.page__nav li{display:inline-block}.page__nav li::after{content:'\a0\25aa\a0'}.page__nav li:last-child::after{content:''}.post-special-home::before{position:static}.archive__header{line-height:2rem}}@media (max-width:667px){html{font-size:16px}}@media (max-width:359px){html{font-size:14px}}.highlight code{color:#485e76}.highlight .c,.highlight .c1,.highlight .cm,.highlight .cs{font-style:italic;color:#a5abb1}.highlight .gp{color:#a5abb1}.highlight .gh,.highlight .gp,.highlight .gs,.highlight .gu{font-weight:700}.highlight .ge{font-style:italic}.highlight .k,.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kr{color:#5e89b9}.highlight .nc,.highlight .ne,.highlight .ni,.highlight .nn,.highlight .nt{color:#d1887b}.highlight .ow,.theme--dark code{font-weight:700}.highlight .s,.highlight .s1,.highlight .s2,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .se,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#c15847}.theme--dark body{background-color:#222;color:#fff}.theme--dark .g--shady{color:#ccc}.theme--dark .post__content pre code{font-weight:400;background:#262626;box-shadow:1.5rem 0 #262626,-1.5rem 0 #262626}.theme--dark .highlight code{color:#8caacb}.theme-dark blockquote{border-left-color:#666}.theme--dark .post__content img{background-color:#fff}@media (max-width:979px){.theme--dark .page__sidebar{box-shadow:0 1px #333}}</style><link rel="shortcut icon" href="http://eprev.org/images/icon.png"><link rel="alternate" type="application/atom+xml" title="Feed" href="http://eprev.org/atom.xml"><meta property="og:url" content="http://eprev.org/2013/09/22/mongo-shell-as-an-interactive-javascript-interpreter/"><meta property="og:title" content="Mongo shell as an interactive JavaScript interpreter"><meta property="og:site_name" content="Anton Eprev"><meta property="og:type" content="article"><meta property="og:description" content="Do you know that MongoDB has JavaScript interpreter? And yes, you can use it."><meta property="og:image" content="http://eprev.org/images/default-share-image.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@eprev"><meta name="twitter:title" content="Mongo shell as an interactive JavaScript interpreter"><meta name="twitter:description" content="Do you know that MongoDB has JavaScript interpreter? And yes, you can use it."><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-12144011-2","auto"),ga("send","pageview")</script><div class="page"><div class="page__sidebar"><div class="page__user-picture-story"><h2 class="page__user-name"><a class="page__user-name-link" href="/">@eprev</a></h2><div class="page__user-picture"></div><div class="page__user-story">My name’s Anton Eprev and I’m a web developer working as front-end engineer at Booking.com in Amsterdam, Netherlands. I’m on <a href="https://twitter.com/eprev">Twitter</a>, <a href="https://github.com/eprev">GitHub</a> and <a href="https://unsplash.com/@eprev">Unsplash</a>.</div></div><ul class="page__nav"><li><a href="/">Home</a></li><li><a href="/archive/">Archive</a></li><li><a href="/tags/">Tags</a></li><li><a href="https://careers.stackoverflow.com/eprev">Résumé</a></li></ul></div><div class="page__content"><div class="post"><h1 class="post__header">Mongo shell as an interactive JavaScript interpreter</h1><div class="post__meta g--shady">September 22, 2013 ∙ <a href="/tags/javascript/">javascript</a>, <a href="/tags/mongodb/">mongodb</a></div><div class="post__content"><p>Do you have MongoDB installed? If you do then you have JavaScript interpreter. MongoDB has SpiderMonkey JavaScript engine. To start an interactive shell you have to type <code class="highlighter-rouge">mongo --nodb</code> in the shell.</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span>mongo --nodb
MongoDB shell version: 2.2.0
<span class="gp">&gt; </span>var user <span class="o">=</span> <span class="o">{</span>name: <span class="s2">"Anton Eprev"</span>, age: 27<span class="o">}</span>
<span class="gp">&gt; </span>user
<span class="o">{</span> <span class="s2">"name"</span> : <span class="s2">"Anton Eprev"</span>, <span class="s2">"age"</span> : 27 <span class="o">}</span>
<span class="gp">&gt; </span>print<span class="o">(</span>user<span class="o">)</span>
<span class="o">[</span>object Object]
<span class="gp">&gt; </span>printjson<span class="o">(</span>user<span class="o">)</span>
<span class="o">{</span> <span class="s2">"name"</span> : <span class="s2">"Anton Eprev"</span>, <span class="s2">"age"</span> : 27 <span class="o">}</span>
<span class="gp">&gt; </span>var numbers <span class="o">=</span> <span class="o">[</span>1, 2, 3, 4, 5, 6, 7, 8, 9]
<span class="gp">&gt; </span>print<span class="o">(</span>numbers<span class="o">)</span>
1,2,3,4,5,6,7,8,9
<span class="gp">&gt; </span>printjson<span class="o">(</span>numbers<span class="o">)</span>
<span class="o">[</span> 1, 2, 3, 4, 5, 6, 7, 8, 9 <span class="o">]</span></code></pre></figure><p>And of course the shell allows you to use loops, user functions and etc.:</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">&gt; </span><span class="k">for</span> <span class="o">(</span>var i <span class="k">in </span>user<span class="o">)</span> <span class="o">{</span> print<span class="o">(</span>i, user[i]<span class="o">)</span> <span class="o">}</span>
name Anton Eprev
age 27
<span class="gp">&gt; </span><span class="k">function </span>add<span class="o">(</span>x<span class="o">){</span> <span class="k">return function</span><span class="o">(</span>y<span class="o">){</span> <span class="k">return </span>x + y <span class="o">}</span> <span class="o">}</span>
<span class="gp">&gt; </span>add<span class="o">(</span>3<span class="o">)(</span>4<span class="o">)</span>
7
<span class="gp">&gt; </span><span class="o">{</span>
... <span class="k">for</span> <span class="o">(</span>var i <span class="o">=</span> 0; i &lt; 10; i++<span class="o">)</span>
...     print<span class="o">(</span>i<span class="o">)</span>
... <span class="o">}</span>
0
1
…
9</code></pre></figure><p>You can also use the <code class="highlighter-rouge">cat</code> function to read the file’s contents.</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">&gt; </span>var profile <span class="o">=</span> cat<span class="o">(</span><span class="s1">'.profile'</span><span class="o">)</span>
<span class="gp">&gt; </span>profile
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/opt/local/bin:/opt/local/sbin:<span class="nv">$PATH</span>
…</code></pre></figure><p>You may even explore global scope by executing <code class="highlighter-rouge">printjson(this)</code> and find out the following functions:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">pwd</span><span class="p">()</span>
<span class="nx">ls</span><span class="p">()</span>
<span class="nx">cd</span><span class="p">()</span>
<span class="nx">mkdir</span><span class="p">()</span>
<span class="nx">hostname</span><span class="p">()</span>
<span class="nx">sleep</span><span class="p">()</span>
<span class="nx">hex_md5</span><span class="p">()</span></code></pre></figure><p>And finally, you can run a JavaScript file using MongoDB shell.</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span>cat hello.js
print<span class="o">(</span><span class="s2">"Hello World!"</span><span class="o">)</span>;
<span class="gp">$ </span>mongo --nodb hello.js
MongoDB shell version: 2.2.0
Hello World!</code></pre></figure><p>Happy coding =]</p></div></div><div class="post-special-home"><a href="/">Home</a></div></div></div></html>