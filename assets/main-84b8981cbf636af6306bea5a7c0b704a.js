(function(){'use strict';function a(H,I){let J=!1;return function(...L){J||(J=!0,requestAnimationFrame(()=>{H.apply(I,L),J=!1}))}}function c(H){function I(){return void 0!==$}function J(ba){!_&&A(ba.deltaX)>A(ba.deltaY)&&(ba.preventDefault(),X=Q(ba.deltaX))}function K(ba){if(!_){_=!0;const ca=ba.clientX;let da=X;const ea=ha=>{da=Q(ha.clientX-ca)},fa=()=>{$.classList.remove('scrollbar--active'),X=da,document.removeEventListener('mousemove',ea),document.removeEventListener('mouseup',fa),_=!1};$.classList.add('scrollbar--active'),document.addEventListener('mousemove',ea),document.addEventListener('mouseup',fa)}}function L(){if(!_){_=!0;const ca=window.pageXOffset+H.getBoundingClientRect().left,da=ca+.9*U,ea=ca+.1*U;let fa=X;const ha=ja=>{ja.clientX>da?fa=Q(V):ja.clientX<ea&&(fa=Q(-V))},ia=()=>{X=fa,document.removeEventListener('mousemove',ha),document.removeEventListener('mouseup',ia),_=!1};document.addEventListener('mousemove',ha),document.addEventListener('mouseup',ia)}}function M(ba){if(!(_||1<ba.touches.length)){_=!0;const ca=ba.touches[0].clientX,da=ba.touches[0].clientY;let ea=X,fa=!1,ha=!1;const ia=ka=>{if(!(1<ka.touches.length)){const la=ka.touches[0].clientX-ca;if(!fa){const ma=ka.touches[0].clientY-da;A(la)>A(ma)&&(ha=!0),fa=!0}ha&&(ea=Q(-la))}},ja=()=>{_=!1,X=ea,document.removeEventListener('touchmove',ia),document.removeEventListener('touchen',ja),document.removeEventListener('touchcancel',ja)};document.addEventListener('touchmove',ia),document.addEventListener('touchend',ja),document.addEventListener('touchcancel',ja)}}function N(){$=document.createElement('div'),$.classList.add('scrollbar'),$.classList.add('scrollbar--horizontal'),H.style.touchAction='pan-y',O(),H.appendChild($),H.addEventListener('wheel',J),H.addEventListener('touchstart',M),H.addEventListener('mousedown',L),$.addEventListener('mousedown',K)}function O(){const ba=z(B(U*U/V),C);Z=(V-U)/(U-ba),Y=U-ba,$.style.width=ba+'px',[$,...W].forEach(ca=>ca.style.willChange='transform')}function P(){H.removeEventListener('wheel',J),H.removeEventListener('touchstart',M),H.removeEventListener('mousedown',L),$.removeEventListener('mousedown',K),H.removeChild($),$=void 0,S()}function Q(ba){const ca=0<ba?w(X+ba,Y):z(X+ba,0);return $.style.transform=`translateX(${ca}px)`,R(-1*ca*Z),ca}function R(ba){W.forEach(ca=>{ca.style.transform=`translateX(${ba}px)`})}function S(){$&&($.style.transform=`translateX(0)`),R(0),X=0,_=!1}function T(){const ba=getComputedStyle(H);U=H.clientWidth-parseFloat(ba.getPropertyValue('padding-left'))-parseFloat(ba.getPropertyValue('padding-right')),W=Array.from(H.childNodes).filter(ca=>{return ca!==$}),V=W.reduce((ca,da)=>{return z(da.scrollWidth,ca)},0),V>U?(I()?O():N(),S()):I()&&P()}if(D.has(H))return D.get(H);let U,V,W,X,Y,Z,$,_;T();const aa={update:T};return D.set(H,aa),aa}function d(){E||(E=!0,F=window.innerWidth,window.addEventListener('resize',G))}function f(){E=!1,window.removeEventListener('resize',G)}const{PI:h,abs:i,min:j,sin:k,cos:l,atan:m}=Math,p=(()=>{const H=document.createElementNS('http://www.w3.org/2000/svg','svg');H.setAttribute('viewBox','0 0 2 2'),Object.assign(H.style,{position:'absolute',top:0,left:0,width:'2px',height:'2px'}),H.innerHTML='<rect width="1" height="1" style="transform: translate(1px, 1px)"/>',document.body.appendChild(H);const I=document.elementFromPoint(1,1)!==H;return H.parentNode.removeChild(H),I})(),q=24,v=function(H,...I){return I[1===H?0:1]};if(window.fetch){const H=document.querySelector('[data-issue-id]');if(H){const I=H.dataset.issueId;fetch(`https://api.github.com/repos/eprev/eprev.org/issues/${I}`,{headers:new Headers({Accept:'application/vnd.github.v3.text+json'})}).then(J=>{200===J.status&&J.json().then(K=>{const L=K.comments;if(L){const M=`There ${v(L,'is','are')} <a href="https://github.com/eprev/eprev.org/issues/${I}">${L} ${v(L,'comment','comments')}</a> on this (visit the postâ€™s issue page on GitHub)`;H.innerHTML=M}})})}}const{min:w,max:z,abs:A,floor:B}=Math,C=50,D=new WeakMap;let E=!1,F;const G=a(()=>{if(F!==window.innerWidth){F=window.innerWidth;const H=Array.from(document.querySelectorAll('.scrollable--enabled'));H.forEach(I=>{const J=D.get(I);J&&J.update()}),0===H.length&&f()}});document.body.addEventListener('click',H=>{if(H.target.matches('[data-ga-on=click]')){const I=H.target.dataset;ga('send','event',I.gaCategory,I.gaAction,I.gaLabel,I.gaValue)}}),function(H){function I(){const Y=window.innerHeight,{top:Z,bottom:$,height:_}=H.getBoundingClientRect();0<=Z&&Z<Y||0<$&&$<=Y||_>Y&&0>Z&&$>Y?J():K()}function J(){Q.forEach(Y=>{const{left:Z,top:$,width:_,height:aa}=Y.el.getBoundingClientRect();Y.left=Z+window.pageXOffset+_/2,Y.top=$+window.pageYOffset+aa/2}),document.addEventListener('mousemove',V),document.addEventListener('touchstart',W),document.addEventListener('touchend',X),document.addEventListener('touchcancel',X)}function K(){P(),document.removeEventListener('mousemove',V),document.removeEventListener('touchstart',W),document.removeEventListener('touchend',X),document.removeEventListener('touchcancel',X)}function L(Y,Z,$){p?Y.style.transform=`translate(${Z}px, ${$}px)`:Y.setAttribute('transform',`translate(${Z} ${$})`)}function M(Y,Z=1,$=1,_=0,aa=0){const ba=`matrix(${Z}, 0, 0, ${$}, ${_*(1-Z)}, ${aa*(1-$)})`;p?R.style.transform=ba:R.setAttribute('transform',ba)}function N(Y,Z,$){const _=Z?0>Z?h+m($/Z):m($/Z):0,aa=j(q,i(Z))*l(_),ba=-1*(j(q,i($))*k(_));L(Y,aa,ba)}function O(Y=250){T||(T=!0,clearTimeout(S),S=setTimeout(()=>M(R,0.25,1.5,208,436),Y))}function P(Y=125){T&&(T=!1,clearTimeout(S),S=setTimeout(()=>M(R),Y))}const Q=[{el:H.querySelector('[data-id=right-eye]')},{el:H.querySelector('[data-id=left-eye]')}],R=H.querySelector('[data-id=mouth]');p&&(Q.forEach(Y=>Y.el.style.willChange='transform'),Object.assign(R.style,{willChange:'transform',transitionDuration:'.25s',transitionProperty:'transform'}));let S=null,T=!1;const U=a(()=>{I()}),V=a(Y=>{Q.forEach(Z=>{N(Z.el,Y.pageX-Z.left,Z.top-Y.pageY)}),Y.target.closest('a')?O():P()}),W=a(Y=>{const Z=Y.touches.item(0);Q.forEach($=>{N($.el,Z.pageX-$.left,$.top-Z.pageY)}),O(0)}),X=a(()=>{P(0)});return window.addEventListener('scroll',U,{passive:!0}),window.addEventListener('resize',U),I(),{resume:J,pause:K}}(document.querySelector('.page__user-picture')),function(H=document){const I=Array.from(H.querySelectorAll('.scrollable:not(.scrollable--enabled)'));I.forEach(J=>{J.classList.add('scrollable--enabled'),c(J)}),I.length&&d()}()})();