(function(){'use strict';function a(m,o){let p=!1;return function(...r){p||(p=!0,requestAnimationFrame(()=>{m.apply(o,r),p=!1}))}}const b=Element.prototype;'function'!=typeof b.matches&&(b.matches=b.msMatchesSelector),'function'!=typeof b.closest&&(b.closest=function(m){for(let o=this;o&&1===o.nodeType;){if(o.matches(m))return o;o=o.parentNode}return null});const{PI:c,abs:d,min:f,sin:g,cos:h,atan:i}=Math,j=(()=>{const m=document.createElementNS('http://www.w3.org/2000/svg','svg');m.setAttribute('viewBox','0 0 2 2'),Object.assign(m.style,{position:'absolute',top:0,left:0,width:'2px',height:'2px'}),m.innerHTML='<rect width="1" height="1" style="transform: translate(1px, 1px)"/>',document.body.appendChild(m);const o=document.elementFromPoint(1,1)!==m;return m.parentNode.removeChild(m),o})(),k=24,l=function(m,...o){return o[1===m?0:1]};if(window.fetch){const m=document.querySelector('[data-issue-id]');if(m){const o=m.dataset.issueId;fetch(`https://api.github.com/repos/eprev/eprev.org/issues/${o}`,{headers:new Headers({Accept:'application/vnd.github.v3.text+json'})}).then(p=>{200===p.status&&p.json().then(q=>{const r=q.comments;if(r){const s=`There ${l(r,'is','are')} <a href="https://github.com/eprev/eprev.org/issues/${o}">${r} ${l(r,'comment','comments')}</a> on this (visit the postâ€™s issue page on GitHub)`;m.innerHTML=s}})})}}document.body.addEventListener('click',m=>{if(m.target.matches('[data-ga-on=click]')){const o=m.target.dataset;ga('send','event',o.gaCategory,o.gaAction,o.gaLabel,o.gaValue)}}),function(o){function p(){const H=window.innerHeight,{top:I,bottom:J,height:K}=o.getBoundingClientRect();0<=I&&I<H||0<J&&J<=H||K>H&&0>I&&J>H?q():r()}function q(){z.forEach(H=>{const{left:I,top:J,width:K,height:L}=H.el.getBoundingClientRect();H.left=I+window.pageXOffset+K/2,H.top=J+window.pageYOffset+L/2}),document.addEventListener('mousemove',E),document.addEventListener('touchstart',F),document.addEventListener('touchend',G),document.addEventListener('touchcancel',G)}function r(){w(),document.removeEventListener('mousemove',E),document.removeEventListener('touchstart',F),document.removeEventListener('touchend',G),document.removeEventListener('touchcancel',G)}function s(H,I,J){j?H.style.transform=`translate(${I}px, ${J}px)`:H.setAttribute('transform',`translate(${I} ${J})`)}function t(H,I=1,J=1,K=0,L=0){const M=`matrix(${I}, 0, 0, ${J}, ${K*(1-I)}, ${L*(1-J)})`;j?A.style.transform=M:A.setAttribute('transform',M)}function u(H,I,J){const K=I?0>I?c+i(J/I):i(J/I):0,L=f(k,d(I))*h(K),M=-1*(f(k,d(J))*g(K));s(H,L,M)}function v(H=250){C||(C=!0,clearTimeout(B),B=setTimeout(()=>t(A,0.25,1.5,208,436),H))}function w(H=125){C&&(C=!1,clearTimeout(B),B=setTimeout(()=>t(A),H))}const z=[{el:o.querySelector('[data-id=right-eye]')},{el:o.querySelector('[data-id=left-eye]')}],A=o.querySelector('[data-id=mouth]');j&&(z.forEach(H=>H.el.style.willChange='transform'),Object.assign(A.style,{willChange:'transform',transitionDuration:'.25s',transitionProperty:'transform'}));let B=null,C=!1;const D=a(()=>{p()}),E=a(H=>{z.forEach(I=>{u(I.el,H.pageX-I.left,I.top-H.pageY)}),H.target.closest('a')?v():w()}),F=a(H=>{const I=H.touches.item(0);z.forEach(J=>{u(J.el,I.pageX-J.left,J.top-I.pageY)}),v(0)}),G=a(()=>{w(0)});return window.addEventListener('scroll',D,{passive:!0}),window.addEventListener('resize',D),p(),{resume:q,pause:r}}(document.querySelector('.page__user-picture'))})();