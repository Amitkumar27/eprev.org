{"version":3,"file":"main.js","sources":["../js/src/utils.js","../js/src/eyed.js","../js/src/comments.js","../js/src/scrollbar.js","../js/main.js"],"sourcesContent":["export function throttle(fn, context) {\n  let running = false;\n  return function throttled(...args) {\n    if (running) {\n      return;\n    }\n    running = true;\n    requestAnimationFrame(() => {\n      fn.apply(context, args);\n      running = false;\n    });\n  };\n}\n","import { throttle } from './utils.js';\n\nconst { PI, abs, min, sin, cos, atan } = Math;\n\n// Edge doesn't apply CSS transforms on SVG elements\nconst supportsCSSTransformsOnSVG = (() => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  svg.setAttribute('viewBox', '0 0 2 2');\n  Object.assign(svg.style, {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '2px',\n    height: '2px',\n  });\n  svg.innerHTML = '<rect width=\"1\" height=\"1\" style=\"transform: translate(1px, 1px)\"/>';\n  document.body.appendChild(svg);\n  const result = document.elementFromPoint(1, 1) !== svg;\n  svg.parentNode.removeChild(svg);\n  return result;\n})();\n\nconst EYE_MAX_RADIUS = 24;\nconst MOUTH_CX = 208;\nconst MOUTH_CY = 436;\nconst MOUTH_SCALE_X = 0.25;\nconst MOUTH_SCALE_Y = 1.5;\n\nexport default function eyed(rootEl) {\n\n  const eyes = [\n    {el: rootEl.querySelector('[data-id=right-eye]')},\n    {el: rootEl.querySelector('[data-id=left-eye]')},\n  ];\n  const mouthEl = rootEl.querySelector('[data-id=mouth]');\n\n  if (supportsCSSTransformsOnSVG) {\n    eyes.forEach(eye => eye.el.style.willChange = 'transform');\n    Object.assign(mouthEl.style, {\n      willChange: 'transform',\n      transitionDuration: '.25s',\n      transitionProperty: 'transform',\n    });\n  }\n\n  let mouthTransformTimer = null;\n  let isMouthOpen = false;\n\n  const onWindowScroll = throttle(() => {\n    checkVisibility();\n  });\n  const onMouseMove = throttle(e => {\n    eyes.forEach(eye => {\n      moveEye(eye.el, e.pageX - eye.left, eye.top - e.pageY);\n    });\n    if (e.target.closest('a')) {\n      openMouth();\n    } else {\n      closeMouth();\n    }\n  });\n  const onTouchStart = throttle(e => {\n    const touch = e.touches.item(0);\n    eyes.forEach(eye => {\n      moveEye(eye.el, touch.pageX - eye.left, eye.top - touch.pageY);\n    });\n    openMouth(0);\n  });\n  const onTouchEnd = throttle(() => {\n    closeMouth(0);\n  });\n\n  // Listen for scroll and resize events and check if the 4-eyed head\n  // is within the viewport\n  window.addEventListener('scroll', onWindowScroll, {passive: true});\n  window.addEventListener('resize', onWindowScroll);\n\n  checkVisibility();\n\n  // Return public interface\n  return {\n    resume,\n    pause,\n  };\n\n  function checkVisibility() {\n    const windowHeight = window.innerHeight;\n    const { top, bottom, height } = rootEl.getBoundingClientRect();\n    if (\n         top >= 0 && top < windowHeight\n      || bottom > 0 && bottom <= windowHeight\n      || height > windowHeight && top < 0 && bottom > windowHeight\n    ) {\n        resume();\n    } else {\n        pause();\n    }\n  }\n\n  function resume() {\n    // Get the position of the every eye\n    eyes.forEach(eye => {\n      const { left, top, width, height } = eye.el.getBoundingClientRect();\n      eye.left = left + window.pageXOffset + width / 2;\n      eye.top = top + window.pageYOffset + height / 2;\n    });\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('touchstart', onTouchStart);\n    document.addEventListener('touchend', onTouchEnd);\n    document.addEventListener('touchcancel', onTouchEnd);\n  }\n\n  function pause() {\n    closeMouth();\n    document.removeEventListener('mousemove', onMouseMove);\n    document.removeEventListener('touchstart', onTouchStart);\n    document.removeEventListener('touchend', onTouchEnd);\n    document.removeEventListener('touchcancel', onTouchEnd);\n  }\n\n  function translate(el, dx, dy) {\n    if (supportsCSSTransformsOnSVG) {\n      el.style.transform = `translate(${dx}px, ${dy}px)`;\n    } else {\n      el.setAttribute('transform', `translate(${dx} ${dy})`);\n    }\n  }\n\n  function scale(el, sx = 1, sy = 1, cx = 0, cy = 0) {\n    // We could use `scale()` function and `transform-origin: center`, but:\n    // 1) the later doesn't work properly in FF: keywords and percentages refer\n    //    to the canvas instead of the object itself (see\n    //    https://bugzilla.mozilla.org/show_bug.cgi?id=1209061)\n    // 2) there's no such thing as `transform-origin` in SVG.\n    // Hence we are gonna use `matrix` function instead.\n    const transform = `matrix(${sx}, 0, 0, ${sy}, ${cx * (1 - sx)}, ${cy * (1 - sy)})`;\n    if (supportsCSSTransformsOnSVG) {\n      mouthEl.style.transform = transform;\n    } else {\n      mouthEl.setAttribute('transform', transform);\n    }\n  }\n\n  function moveEye(el, x, y) {\n    const angle = x\n      ? (x < 0 ? PI + atan( y / x ) : atan( y / x ))\n      : 0;\n    const dx = min(EYE_MAX_RADIUS, abs(x)) * cos(angle);\n    const dy = min(EYE_MAX_RADIUS, abs(y)) * sin(angle) * -1;\n    translate(el, dx, dy);\n  }\n\n  function openMouth(delay = 250) {\n    if (!isMouthOpen) {\n      isMouthOpen = true;\n      clearTimeout(mouthTransformTimer);\n      mouthTransformTimer = setTimeout(\n        () => scale(mouthEl, MOUTH_SCALE_X, MOUTH_SCALE_Y, MOUTH_CX, MOUTH_CY), delay\n      );\n    }\n  }\n\n  function closeMouth(delay = 125) {\n    if (isMouthOpen) {\n      isMouthOpen = false;\n      clearTimeout(mouthTransformTimer);\n      mouthTransformTimer = setTimeout(\n        () => scale(mouthEl), delay\n      );\n    }\n  }\n\n}\n","const plural = function (n, ...forms) {\n  return forms[n === 1 ? 0 : 1];\n};\n\nconst el = document.querySelector('[data-issue-id]');\nif (el) {\n  const issueId = el.dataset.issueId;\n  fetch(`https://api.github.com/repos/eprev/eprev.org/issues/${issueId}`, {\n      headers: new Headers({\n        'Accept': 'application/vnd.github.v3.text+json'\n      })\n  }).then(response => {\n    if (response.status === 200) {\n      response.json().then(json => {\n        const comments = json.comments;\n        if (comments) {\n          const html = `There ${\n              plural(comments, 'is', 'are')\n            } <a href=\"https://github.com/eprev/eprev.org/issues/${ issueId }\">${ comments } ${\n              plural(comments, 'comment', 'comments')\n            }</a> on this (visit the postâ€™s issue page on GitHub).`;\n          el.querySelector('.post-comments__text').innerHTML = html;\n        }\n      })\n    }\n  });\n}\n","import { throttle } from './utils.js';\n\nconst { min, max, abs, floor } = Math;\n\nconst MIN_SCROLLBAR_WIDTH = 50;\n\nconst cache = new WeakMap();\n\nfunction scrollable(targetEl) {\n\n  if (cache.has(targetEl)) {\n    return cache.get(targetEl);\n  }\n\n  let clientWidth;\n  let scrollWidth;\n  let childNodes;\n  let scrollLeft;\n  let scrollLeftMax;\n  let scrollRatio;\n  let sbEl;\n  let isLocked;\n\n  update();\n\n  function hasScrollBar() {\n    return sbEl !== undefined;\n  }\n\n  function targetOnMouseWheel(e) {\n    if (!isLocked && abs(e.deltaX) > abs(e.deltaY)) {\n      e.preventDefault();\n      scrollLeft = scrollBy(e.deltaX);\n    }\n  }\n\n  function scrollBarOnMouseDown(e) {\n    if (isLocked) {\n      return;\n    }\n    isLocked = true;\n\n    const clientX = e.clientX;\n    let currScrollLeft = scrollLeft;\n\n    const onMouseMove = e => {\n      currScrollLeft = scrollBy(e.clientX - clientX);\n    };\n\n    const onMouseUp = e => {\n      sbEl.classList.remove('scrollbar--active');\n      scrollLeft = currScrollLeft;\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      isLocked = false;\n    };\n\n    sbEl.classList.add('scrollbar--active');\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  };\n\n  function targetOnMouseDown(e) {\n    if (isLocked) {\n      return;\n    }\n    isLocked = true;\n\n    const targetX = window.pageXOffset + targetEl.getBoundingClientRect().left;\n    const leftX = targetX + clientWidth * .9;\n    const rightX = targetX + clientWidth * .1;\n\n    let currScrollLeft = scrollLeft;\n\n    const onMouseMove = e => {\n      if (e.clientX > leftX) {\n        currScrollLeft = scrollBy(scrollWidth);\n      } else if (e.clientX < rightX) {\n        currScrollLeft = scrollBy(-scrollWidth);\n      }\n    };\n\n    const onMouseUp = e => {\n      scrollLeft = currScrollLeft;\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      isLocked = false;\n    };\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  };\n\n  function targetOnTouchStart(e) {\n    if (isLocked || e.touches.length > 1) {\n      return;\n    }\n    isLocked = true;\n\n    const clientX = e.touches[0].clientX;\n    const clientY = e.touches[0].clientY;\n    let currScrollLeft = scrollLeft;\n\n    let isDetected = false;\n    let isAllowed = false;\n\n    const onTouchMove = e => {\n      if (e.touches.length > 1) {\n        return;\n      }\n      const dx = e.touches[0].clientX - clientX;\n      if (!isDetected) {\n        const dy = e.touches[0].clientY - clientY;\n        if (abs(dx) > abs(dy)) {\n          isAllowed = true;\n        }\n        isDetected = true;\n      }\n      if (isAllowed) {\n        currScrollLeft = scrollBy(-dx);\n      }\n    };\n\n    const onTouchEnd = e => {\n      isLocked = false;\n      scrollLeft = currScrollLeft;\n      document.removeEventListener('touchmove', onTouchMove);\n      document.removeEventListener('touchen', onTouchEnd);\n      document.removeEventListener('touchcancel', onTouchEnd);\n    };\n\n    document.addEventListener('touchmove', onTouchMove);\n    document.addEventListener('touchend', onTouchEnd);\n    document.addEventListener('touchcancel', onTouchEnd);\n  }\n\n  function addScrollBar() {\n    sbEl = document.createElement('div');\n    sbEl.classList.add('scrollbar');\n    sbEl.classList.add('scrollbar--horizontal');\n    targetEl.style.touchAction = 'pan-y';\n\n    updateScrollBar();\n    targetEl.appendChild(sbEl);\n\n    targetEl.addEventListener('wheel', targetOnMouseWheel);\n    targetEl.addEventListener('touchstart', targetOnTouchStart);\n    targetEl.addEventListener('mousedown', targetOnMouseDown);\n    sbEl.addEventListener('mousedown', scrollBarOnMouseDown);\n  }\n\n  function updateScrollBar() {\n    const scrollBarWidth = max(\n        floor( clientWidth * clientWidth / scrollWidth ),\n        MIN_SCROLLBAR_WIDTH\n      );\n    scrollRatio = (scrollWidth - clientWidth) / (clientWidth - scrollBarWidth);\n    scrollLeftMax = clientWidth - scrollBarWidth;\n\n    sbEl.style.width = scrollBarWidth + 'px';\n\n    [sbEl, ...childNodes].forEach((el) => el.style.willChange = 'transform');\n  }\n\n  function removeScrollBar() {\n    targetEl.removeEventListener('wheel', targetOnMouseWheel);\n    targetEl.removeEventListener('touchstart', targetOnTouchStart);\n    targetEl.removeEventListener('mousedown', targetOnMouseDown);\n    sbEl.removeEventListener('mousedown', scrollBarOnMouseDown);\n\n    targetEl.removeChild(sbEl);\n    sbEl = undefined;\n    resetScroll();\n  }\n\n  function scrollBy(dx) {\n    const sdx = dx > 0\n        ? min(scrollLeft + dx, scrollLeftMax)\n        : max(scrollLeft + dx, 0);\n    sbEl.style.transform = `translateX(${sdx}px)`;\n    scrollContentTo(-1 * sdx * scrollRatio);\n    return sdx;\n  }\n\n  function scrollContentTo(x) {\n    childNodes.forEach((childEl) => {\n      childEl.style.transform = `translateX(${x}px)`;\n    });\n  }\n\n  function resetScroll() {\n    if (sbEl) {\n      sbEl.style.transform = `translateX(0)`;\n    }\n    scrollContentTo(0);\n    scrollLeft = 0;\n    isLocked = false;\n  }\n\n  function update() {\n    const style = getComputedStyle(targetEl);\n    clientWidth = targetEl.clientWidth -\n        parseFloat(style.getPropertyValue('padding-left')) -\n        parseFloat(style.getPropertyValue('padding-right'));\n\n    childNodes = Array.from(targetEl.childNodes).filter((childEl) => {\n        return childEl !== sbEl;\n      });\n    scrollWidth = childNodes.reduce((maxWidth, childEl) => {\n        return max(childEl.scrollWidth, maxWidth);\n      }, 0);\n\n    if (scrollWidth > clientWidth) {\n      if (hasScrollBar()) {\n        updateScrollBar();\n      } else {\n        addScrollBar();\n      }\n      resetScroll();\n    } else {\n      if (hasScrollBar()) {\n        removeScrollBar();\n      }\n    }\n\n  }\n\n  const object = {\n    update,\n  };\n\n  cache.set(targetEl, object);\n\n  return object;\n\n}\n\nlet isWatching = false;\nlet windowWidth;\n\nconst windowOnResize = throttle(() => {\n  // Ignore the viewport height changes, `resize` often happens in the mobile browsers\n  // after UI elements (eg. address bar) appear on the page.\n  if (windowWidth === window.innerWidth) {\n    return;\n  }\n  windowWidth = window.innerWidth;\n\n  const els = Array.from( document.querySelectorAll('.scrollable--enabled') );\n  els.forEach((el) => {\n    const o = cache.get(el);\n    if (o) {\n      o.update();\n    }\n  });\n\n  if (els.length === 0) {\n    stopWatching();\n  }\n});\n\nfunction startWatching() {\n  if (!isWatching) {\n    isWatching = true;\n    windowWidth = window.innerWidth;\n    window.addEventListener('resize', windowOnResize);\n  }\n}\n\nfunction stopWatching() {\n  isWatching = false;\n  window.removeEventListener('resize', windowOnResize);\n}\n\nexport default function scrollbar(root = document) {\n\n  const els = Array.from( root.querySelectorAll('.scrollable:not(.scrollable--enabled)') );\n\n  els.forEach((el) => {\n    el.classList.add('scrollable--enabled');\n    scrollable(el);\n  });\n\n  if (els.length) {\n    startWatching();\n  }\n\n}\n","import eyed from './src/eyed.js';\nimport './src/comments.js';\nimport scrollbar from './src/scrollbar.js';\n\neyed( document.querySelector('.page__user-picture') );\nscrollbar();\n"],"names":["min","abs"],"mappings":"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"}