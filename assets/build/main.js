(function(){'use strict';function a(I,J){let K=!1;return function(...M){K||(K=!0,requestAnimationFrame(()=>{I.apply(J,M),K=!1}))}}function c(I){function J(){return void 0!==_}function K(ca){!aa&&B(ca.deltaX)>B(ca.deltaY)&&(ca.preventDefault(),Y=R(ca.deltaX))}function L(ca){if(!aa){aa=!0;const da=ca.clientX;let ea=Y;const fa=ha=>{ea=R(ha.clientX-da)},ga=()=>{_.classList.remove('scrollbar--active'),Y=ea,document.removeEventListener('mousemove',fa),document.removeEventListener('mouseup',ga),aa=!1};_.classList.add('scrollbar--active'),document.addEventListener('mousemove',fa),document.addEventListener('mouseup',ga)}}function M(){if(!aa){aa=!0;const da=window.pageXOffset+I.getBoundingClientRect().left,ea=da+.9*V,fa=da+.1*V;let ga=Y;const ha=ja=>{ja.clientX>ea?ga=R(W):ja.clientX<fa&&(ga=R(-W))},ia=()=>{Y=ga,document.removeEventListener('mousemove',ha),document.removeEventListener('mouseup',ia),aa=!1};document.addEventListener('mousemove',ha),document.addEventListener('mouseup',ia)}}function N(ca){if(!(aa||1<ca.touches.length)){aa=!0;const da=ca.touches[0].clientX,ea=ca.touches[0].clientY;let fa=Y,ga=!1,ha=!1;const ia=ka=>{if(!(1<ka.touches.length)){const la=ka.touches[0].clientX-da;if(!ga){const ma=ka.touches[0].clientY-ea;B(la)>B(ma)&&(ha=!0),ga=!0}ha&&(fa=R(-la))}},ja=()=>{aa=!1,Y=fa,document.removeEventListener('touchmove',ia),document.removeEventListener('touchen',ja),document.removeEventListener('touchcancel',ja)};document.addEventListener('touchmove',ia),document.addEventListener('touchend',ja),document.addEventListener('touchcancel',ja)}}function O(){_=document.createElement('div'),_.classList.add('scrollbar'),_.classList.add('scrollbar--horizontal'),I.style.touchAction='pan-y',P(),I.appendChild(_),I.addEventListener('wheel',K),I.addEventListener('touchstart',N),I.addEventListener('mousedown',M),_.addEventListener('mousedown',L)}function P(){const ca=A(C(V*V/W),D);$=(W-V)/(V-ca),Z=V-ca,_.style.width=ca+'px',[_,...X].forEach(da=>da.style.willChange='transform')}function Q(){I.removeEventListener('wheel',K),I.removeEventListener('touchstart',N),I.removeEventListener('mousedown',M),_.removeEventListener('mousedown',L),I.removeChild(_),_=void 0,T()}function R(ca){const da=0<ca?z(Y+ca,Z):A(Y+ca,0);return _.style.transform=`translateX(${da}px)`,S(-1*da*$),da}function S(ca){X.forEach(da=>{da.style.transform=`translateX(${ca}px)`})}function T(){_&&(_.style.transform=`translateX(0)`),S(0),Y=0,aa=!1}function U(){const ca=getComputedStyle(I);V=I.clientWidth-parseFloat(ca.getPropertyValue('padding-left'))-parseFloat(ca.getPropertyValue('padding-right')),X=Array.from(I.childNodes).filter(da=>{return da!==_}),W=X.reduce((da,ea)=>{return A(ea.scrollWidth,da)},0),W>V?(J()?P():O(),T()):J()&&Q()}if(E.has(I))return E.get(I);let V,W,X,Y,Z,$,_,aa;U();const ba={update:U};return E.set(I,ba),ba}function d(){F||(F=!0,G=window.innerWidth,window.addEventListener('resize',H))}function f(){F=!1,window.removeEventListener('resize',H)}const{PI:h,abs:i,min:j,sin:k,cos:l,atan:m}=Math,p=(()=>{const I=document.createElementNS('http://www.w3.org/2000/svg','svg');I.setAttribute('viewBox','0 0 2 2'),Object.assign(I.style,{position:'absolute',top:0,left:0,width:'2px',height:'2px'}),I.innerHTML='<rect width="1" height="1" style="transform: translate(1px, 1px)"/>',document.body.appendChild(I);const J=document.elementFromPoint(1,1)!==I;return I.parentNode.removeChild(I),J})(),q=24,v=function(I,...J){return J[1===I?0:1]},w=document.querySelector('[data-issue-id]');if(w){const I=w.dataset.issueId;fetch(`https://api.github.com/repos/eprev/eprev.org/issues/${I}`,{headers:new Headers({Accept:'application/vnd.github.v3.text+json'})}).then(J=>{200===J.status&&J.json().then(K=>{const L=K.comments;if(L){const M=`There ${v(L,'is','are')} <a href="https://github.com/eprev/eprev.org/issues/${I}">${L} ${v(L,'comment','comments')}</a> on this (visit the postâ€™s issue page on GitHub).`;w.querySelector('.post-comments__text').innerHTML=M}})})}const{min:z,max:A,abs:B,floor:C}=Math,D=50,E=new WeakMap;let F=!1,G;const H=a(()=>{if(G!==window.innerWidth){G=window.innerWidth;const I=Array.from(document.querySelectorAll('.scrollable--enabled'));I.forEach(J=>{const K=E.get(J);K&&K.update()}),0===I.length&&f()}});(function(I){function J(){const Z=window.innerHeight,{top:$,bottom:_,height:aa}=I.getBoundingClientRect();0<=$&&$<Z||0<_&&_<=Z||aa>Z&&0>$&&_>Z?K():L()}function K(){R.forEach(Z=>{const{left:$,top:_,width:aa,height:ba}=Z.el.getBoundingClientRect();Z.left=$+window.pageXOffset+aa/2,Z.top=_+window.pageYOffset+ba/2}),document.addEventListener('mousemove',W),document.addEventListener('touchstart',X),document.addEventListener('touchend',Y),document.addEventListener('touchcancel',Y)}function L(){Q(),document.removeEventListener('mousemove',W),document.removeEventListener('touchstart',X),document.removeEventListener('touchend',Y),document.removeEventListener('touchcancel',Y)}function M(Z,$,_){p?Z.style.transform=`translate(${$}px, ${_}px)`:Z.setAttribute('transform',`translate(${$} ${_})`)}function N(Z,$=1,_=1,aa=0,ba=0){const ca=`matrix(${$}, 0, 0, ${_}, ${aa*(1-$)}, ${ba*(1-_)})`;p?S.style.transform=ca:S.setAttribute('transform',ca)}function O(Z,$,_){const aa=$?0>$?h+m(_/$):m(_/$):0,ba=j(q,i($))*l(aa),ca=-1*(j(q,i(_))*k(aa));M(Z,ba,ca)}function P(Z=250){U||(U=!0,clearTimeout(T),T=setTimeout(()=>N(S,0.25,1.5,208,436),Z))}function Q(Z=125){U&&(U=!1,clearTimeout(T),T=setTimeout(()=>N(S),Z))}const R=[{el:I.querySelector('[data-id=right-eye]')},{el:I.querySelector('[data-id=left-eye]')}],S=I.querySelector('[data-id=mouth]');p&&(R.forEach(Z=>Z.el.style.willChange='transform'),Object.assign(S.style,{willChange:'transform',transitionDuration:'.25s',transitionProperty:'transform'}));let T=null,U=!1;const V=a(()=>{J()}),W=a(Z=>{R.forEach($=>{O($.el,Z.pageX-$.left,$.top-Z.pageY)}),Z.target.closest('a')?P():Q()}),X=a(Z=>{const $=Z.touches.item(0);R.forEach(_=>{O(_.el,$.pageX-_.left,_.top-$.pageY)}),P(0)}),Y=a(()=>{Q(0)});return window.addEventListener('scroll',V,{passive:!0}),window.addEventListener('resize',V),J(),{resume:K,pause:L}})(document.querySelector('.page__user-picture')),function(I=document){const J=Array.from(I.querySelectorAll('.scrollable:not(.scrollable--enabled)'));J.forEach(K=>{K.classList.add('scrollable--enabled'),c(K)}),J.length&&d()}()})();