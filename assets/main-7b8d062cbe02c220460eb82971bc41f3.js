(function(){'use strict';function a(I,J){let K=!1;return function(...M){K||(K=!0,requestAnimationFrame(()=>{I.apply(J,M),K=!1}))}}function c(I){function J(){return void 0!==_}function K(ca){!aa&&B(ca.deltaX)>B(ca.deltaY)&&(ca.preventDefault(),Y=R(ca.deltaX))}function L(ca){if(!aa){aa=!0;const da=ca.clientX;let ea=Y;const fa=ia=>{ea=R(ia.clientX-da)},ha=()=>{_.classList.remove('scrollbar--active'),Y=ea,document.removeEventListener('mousemove',fa),document.removeEventListener('mouseup',ha),aa=!1};_.classList.add('scrollbar--active'),document.addEventListener('mousemove',fa),document.addEventListener('mouseup',ha)}}function M(){if(!aa){aa=!0;const da=window.pageXOffset+I.getBoundingClientRect().left,ea=da+.9*V,fa=da+.1*V;let ha=Y;const ia=ka=>{ka.clientX>ea?ha=R(W):ka.clientX<fa&&(ha=R(-W))},ja=()=>{Y=ha,document.removeEventListener('mousemove',ia),document.removeEventListener('mouseup',ja),aa=!1};document.addEventListener('mousemove',ia),document.addEventListener('mouseup',ja)}}function N(ca){if(!(aa||1<ca.touches.length)){aa=!0;const da=ca.touches[0].clientX,ea=ca.touches[0].clientY;let fa=Y,ha=!1,ia=!1;const ja=la=>{if(!(1<la.touches.length)){const ma=la.touches[0].clientX-da;if(!ha){const na=la.touches[0].clientY-ea;B(ma)>B(na)&&(ia=!0),ha=!0}ia&&(fa=R(-ma))}},ka=()=>{aa=!1,Y=fa,document.removeEventListener('touchmove',ja),document.removeEventListener('touchen',ka),document.removeEventListener('touchcancel',ka)};document.addEventListener('touchmove',ja),document.addEventListener('touchend',ka),document.addEventListener('touchcancel',ka)}}function O(){_=document.createElement('div'),_.classList.add('scrollbar'),_.classList.add('scrollbar--horizontal'),I.style.touchAction='pan-y',P(),I.appendChild(_),I.addEventListener('wheel',K),I.addEventListener('touchstart',N),I.addEventListener('mousedown',M),_.addEventListener('mousedown',L)}function P(){const ca=A(C(V*V/W),D);$=(W-V)/(V-ca),Z=V-ca,_.style.width=ca+'px',[_,...X].forEach(da=>da.style.willChange='transform')}function Q(){I.removeEventListener('wheel',K),I.removeEventListener('touchstart',N),I.removeEventListener('mousedown',M),_.removeEventListener('mousedown',L),I.removeChild(_),_=void 0,T()}function R(ca){const da=0<ca?z(Y+ca,Z):A(Y+ca,0);return _.style.transform=`translateX(${da}px)`,S(-1*da*$),da}function S(ca){X.forEach(da=>{da.style.transform=`translateX(${ca}px)`})}function T(){_&&(_.style.transform=`translateX(0)`),S(0),Y=0,aa=!1}function U(){const ca=getComputedStyle(I);V=I.clientWidth-parseInt(ca.getPropertyValue('padding-left'))-parseInt(ca.getPropertyValue('padding-right')),X=Array.from(I.childNodes).filter(da=>{return da!==_}),W=X.reduce((da,ea)=>{return A(ea.scrollWidth,da)},0),W>V?(J()?P():O(),T()):J()&&Q()}if(E.has(I))return E.get(I);let V,W,X,Y,Z,$,_,aa;U();const ba={update:U};return E.set(I,ba),ba}function d(){F||(F=!0,G=window.innerWidth,window.addEventListener('resize',H))}function f(){F=!1,window.removeEventListener('resize',H)}const h=Element.prototype;'function'!=typeof h.matches&&(h.matches=h.msMatchesSelector),'function'!=typeof h.closest&&(h.closest=function(I){for(let J=this;J&&1===J.nodeType;){if(J.matches(I))return J;J=J.parentNode}return null});const{PI:i,abs:j,min:k,sin:l,cos:m,atan:p}=Math,q=(()=>{const I=document.createElementNS('http://www.w3.org/2000/svg','svg');I.setAttribute('viewBox','0 0 2 2'),Object.assign(I.style,{position:'absolute',top:0,left:0,width:'2px',height:'2px'}),I.innerHTML='<rect width="1" height="1" style="transform: translate(1px, 1px)"/>',document.body.appendChild(I);const J=document.elementFromPoint(1,1)!==I;return I.parentNode.removeChild(I),J})(),r=24,w=function(I,...J){return J[1===I?0:1]};if(window.fetch){const I=document.querySelector('[data-issue-id]');if(I){const J=I.dataset.issueId;fetch(`https://api.github.com/repos/eprev/eprev.org/issues/${J}`,{headers:new Headers({Accept:'application/vnd.github.v3.text+json'})}).then(K=>{200===K.status&&K.json().then(L=>{const M=L.comments;if(M){const N=`There ${w(M,'is','are')} <a href="https://github.com/eprev/eprev.org/issues/${J}">${M} ${w(M,'comment','comments')}</a> on this (visit the postâ€™s issue page on GitHub)`;I.innerHTML=N}})})}}const{min:z,max:A,abs:B,floor:C}=Math,D=50,E=new WeakMap;let F=!1,G;const H=a(()=>{if(G!==window.innerWidth){G=window.innerWidth;const I=Array.from(document.querySelectorAll('.scrollable--enabled'));I.forEach(J=>{const K=E.get(J);K&&K.update()}),0===I.length&&f()}});document.body.addEventListener('click',I=>{if(I.target.matches('[data-ga-on=click]')){const J=I.target.dataset;ga('send','event',J.gaCategory,J.gaAction,J.gaLabel,J.gaValue)}}),function(I){function J(){const Z=window.innerHeight,{top:$,bottom:_,height:aa}=I.getBoundingClientRect();0<=$&&$<Z||0<_&&_<=Z||aa>Z&&0>$&&_>Z?K():L()}function K(){R.forEach(Z=>{const{left:$,top:_,width:aa,height:ba}=Z.el.getBoundingClientRect();Z.left=$+window.pageXOffset+aa/2,Z.top=_+window.pageYOffset+ba/2}),document.addEventListener('mousemove',W),document.addEventListener('touchstart',X),document.addEventListener('touchend',Y),document.addEventListener('touchcancel',Y)}function L(){Q(),document.removeEventListener('mousemove',W),document.removeEventListener('touchstart',X),document.removeEventListener('touchend',Y),document.removeEventListener('touchcancel',Y)}function M(Z,$,_){q?Z.style.transform=`translate(${$}px, ${_}px)`:Z.setAttribute('transform',`translate(${$} ${_})`)}function N(Z,$=1,_=1,aa=0,ba=0){const ca=`matrix(${$}, 0, 0, ${_}, ${aa*(1-$)}, ${ba*(1-_)})`;q?S.style.transform=ca:S.setAttribute('transform',ca)}function O(Z,$,_){const aa=$?0>$?i+p(_/$):p(_/$):0,ba=k(r,j($))*m(aa),ca=-1*(k(r,j(_))*l(aa));M(Z,ba,ca)}function P(Z=250){U||(U=!0,clearTimeout(T),T=setTimeout(()=>N(S,0.25,1.5,208,436),Z))}function Q(Z=125){U&&(U=!1,clearTimeout(T),T=setTimeout(()=>N(S),Z))}const R=[{el:I.querySelector('[data-id=right-eye]')},{el:I.querySelector('[data-id=left-eye]')}],S=I.querySelector('[data-id=mouth]');q&&(R.forEach(Z=>Z.el.style.willChange='transform'),Object.assign(S.style,{willChange:'transform',transitionDuration:'.25s',transitionProperty:'transform'}));let T=null,U=!1;const V=a(()=>{J()}),W=a(Z=>{R.forEach($=>{O($.el,Z.pageX-$.left,$.top-Z.pageY)}),Z.target.closest('a')?P():Q()}),X=a(Z=>{const $=Z.touches.item(0);R.forEach(_=>{O(_.el,$.pageX-_.left,_.top-$.pageY)}),P(0)}),Y=a(()=>{Q(0)});return window.addEventListener('scroll',V,{passive:!0}),window.addEventListener('resize',V),J(),{resume:K,pause:L}}(document.querySelector('.page__user-picture')),function(I=document){const J=Array.from(I.querySelectorAll('.scrollable:not(.scrollable--enabled)'));J.forEach(K=>{K.classList.add('scrollable--enabled'),c(K)}),J.length&&d()}()})();