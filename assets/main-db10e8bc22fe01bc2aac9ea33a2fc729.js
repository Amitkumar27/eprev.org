(function(){'use strict';function a(B,C){let D=!1;return function(...F){D||(D=!0,requestAnimationFrame(()=>{B.apply(C,F),D=!1}))}}function b(B){function C(){return void 0!==T}function D(W){!U&&t(W.deltaX)>t(W.deltaY)&&(W.preventDefault(),Q=J(W.deltaX))}function E(W){function X(_){$=J(_.clientX-Z)}function Y(){T.classList.remove('scrollbar--active'),Q=$,document.removeEventListener('mousemove',X),document.removeEventListener('mouseup',Y),U=!1}if(!U){U=!0;let Z=W.clientX,$=Q;T.classList.add('scrollbar--active'),document.addEventListener('mousemove',X),document.addEventListener('mouseup',Y)}}function F(W){function X(ca){if(!(1<ca.touches.length)){const da=ca.touches[0].clientX-Z;if(!aa){const ea=ca.touches[0].clientY-$;t(da)>t(ea)&&(ba=!0),aa=!0}ba&&(_=J(-da))}}function Y(){U=!1,Q=_,document.removeEventListener('touchmove',X),document.removeEventListener('touchen',Y),document.removeEventListener('touchcancel',Y)}if(!(U||1<W.touches.length)){U=!0;let Z=W.touches[0].clientX,$=W.touches[0].clientY,_=Q,aa=!1,ba=!1;document.addEventListener('touchmove',X),document.addEventListener('touchend',Y),document.addEventListener('touchcancel',Y)}}function G(){T=document.createElement('div'),T.classList.add('scrollbar'),T.classList.add('scrollbar--horizontal'),B.style.touchAction='pan-y',H(),B.appendChild(T),B.addEventListener('wheel',D),B.addEventListener('touchstart',F),T.addEventListener('mousedown',E)}function H(){const W=s(u(N*N/O),50);S=(O-N)/(N-W),R=N-W,T.style.width=W+'px',[T,...P].forEach(X=>X.style.willChange='transform')}function I(){B.removeEventListener('wheel',D),B.removeEventListener('touchstart',F),T.removeEventListener('mousedown',E),B.removeChild(T),T=void 0,L()}function J(W){const X=0<W?r(Q+W,R):s(Q+W,0);return T.style.transform=`translateX(${X}px)`,K(-1*X*S),X}function K(W){P.forEach(X=>{X.style.transform=`translateX(${W}px)`})}function L(){T&&(T.style.transform=`translateX(0)`),K(0),Q=0,U=!1}function M(){const W=getComputedStyle(B);N=B.clientWidth-parseInt(W.getPropertyValue('padding-left'))-parseInt(W.getPropertyValue('padding-right')),P=Array.from(B.childNodes).filter(X=>{return X!==T}),O=P.reduce((X,Y)=>{return s(Y.scrollWidth,X)},0),O>N?(C()?H():G(),L()):C()&&I()}if(v.has(B))return v.get(B);let N,O,P,Q,R,S,T,U;M();const V={update:M};return v.set(B,V),V}function c(){w||(w=!0,z=window.innerWidth,window.addEventListener('resize',A))}function d(){w=!1,window.removeEventListener('resize',A)}const f=Element.prototype;'function'!=typeof f.matches&&(f.matches=f.msMatchesSelector),'function'!=typeof f.closest&&(f.closest=function(B){for(let C=this;C&&1===C.nodeType;){if(C.matches(B))return C;C=C.parentNode}return null});const{PI:g,abs:h,min:i,sin:j,cos:k,atan:l}=Math,m=(()=>{const B=document.createElementNS('http://www.w3.org/2000/svg','svg');B.setAttribute('viewBox','0 0 2 2'),Object.assign(B.style,{position:'absolute',top:0,left:0,width:'2px',height:'2px'}),B.innerHTML='<rect width="1" height="1" style="transform: translate(1px, 1px)"/>',document.body.appendChild(B);const C=document.elementFromPoint(1,1)!==B;return B.parentNode.removeChild(B),C})(),p=24,q=function(B,...C){return C[1===B?0:1]};if(window.fetch){const B=document.querySelector('[data-issue-id]');if(B){const C=B.dataset.issueId;fetch(`https://api.github.com/repos/eprev/eprev.org/issues/${C}`,{headers:new Headers({Accept:'application/vnd.github.v3.text+json'})}).then(D=>{200===D.status&&D.json().then(E=>{const F=E.comments;if(F){const G=`There ${q(F,'is','are')} <a href="https://github.com/eprev/eprev.org/issues/${C}">${F} ${q(F,'comment','comments')}</a> on this (visit the postâ€™s issue page on GitHub)`;B.innerHTML=G}})})}}const{min:r,max:s,abs:t,floor:u}=Math,v=new WeakMap;let w=!1,z;const A=a(()=>{if(z!==window.innerWidth){z=window.innerWidth;const B=Array.from(document.querySelectorAll('.scrollable--enabled'));B.forEach(C=>{const D=v.get(C);D&&D.update()}),0===B.length&&d()}});document.body.addEventListener('click',B=>{if(B.target.matches('[data-ga-on=click]')){const C=B.target.dataset;ga('send','event',C.gaCategory,C.gaAction,C.gaLabel,C.gaValue)}}),function(C){function D(){const T=window.innerHeight,{top:U,bottom:V,height:W}=C.getBoundingClientRect();0<=U&&U<T||0<V&&V<=T||W>T&&0>U&&V>T?E():F()}function E(){L.forEach(T=>{const{left:U,top:V,width:W,height:X}=T.el.getBoundingClientRect();T.left=U+window.pageXOffset+W/2,T.top=V+window.pageYOffset+X/2}),document.addEventListener('mousemove',Q),document.addEventListener('touchstart',R),document.addEventListener('touchend',S),document.addEventListener('touchcancel',S)}function F(){K(),document.removeEventListener('mousemove',Q),document.removeEventListener('touchstart',R),document.removeEventListener('touchend',S),document.removeEventListener('touchcancel',S)}function G(T,U,V){m?T.style.transform=`translate(${U}px, ${V}px)`:T.setAttribute('transform',`translate(${U} ${V})`)}function H(T,U=1,V=1,W=0,X=0){const Y=`matrix(${U}, 0, 0, ${V}, ${W*(1-U)}, ${X*(1-V)})`;m?M.style.transform=Y:M.setAttribute('transform',Y)}function I(T,U,V){const W=U?0>U?g+l(V/U):l(V/U):0,X=i(p,h(U))*k(W),Y=-1*(i(p,h(V))*j(W));G(T,X,Y)}function J(T=250){O||(O=!0,clearTimeout(N),N=setTimeout(()=>H(M,0.25,1.5,208,436),T))}function K(T=125){O&&(O=!1,clearTimeout(N),N=setTimeout(()=>H(M),T))}const L=[{el:C.querySelector('[data-id=right-eye]')},{el:C.querySelector('[data-id=left-eye]')}],M=C.querySelector('[data-id=mouth]');m&&(L.forEach(T=>T.el.style.willChange='transform'),Object.assign(M.style,{willChange:'transform',transitionDuration:'.25s',transitionProperty:'transform'}));let N=null,O=!1;const P=a(()=>{D()}),Q=a(T=>{L.forEach(U=>{I(U.el,T.pageX-U.left,U.top-T.pageY)}),T.target.closest('a')?J():K()}),R=a(T=>{const U=T.touches.item(0);L.forEach(V=>{I(V.el,U.pageX-V.left,V.top-U.pageY)}),J(0)}),S=a(()=>{K(0)});return window.addEventListener('scroll',P,{passive:!0}),window.addEventListener('resize',P),D(),{resume:E,pause:F}}(document.querySelector('.page__user-picture')),function(C=document){const D=Array.from(C.querySelectorAll('.scrollable:not(.scrollable--enabled)'));D.forEach(E=>{E.classList.add('scrollable--enabled'),b(E)}),D.length&&c()}()})();